
<!-- TODO: Remove all comments before deploying your code to production. -->
<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- TODO: Add a description of the page for better SEO and sharing previews. -->
    <meta
      name="description"
      content="Add a description to provide a brief summary of the content."
    />

    <!-- TODO: Insert a concise, descriptive title that summarizes your page's content. -->
    <title>Basic Page Template (EN)</title>

    <!---------- GC Design System Utility ---------->
    <!-- TODO: Replace <version-number> with the latest version number to receive corresponding updates of the GC Design System utility framework. All notable changes will be documented in the changelog: https://github.com/cds-snc/gcds-utility/blob/main/CHANGELOG.md -->
    <link
      rel="stylesheet"
      href="https://cdn.design-system.alpha.canada.ca/@cdssnc/gcds-utility@1.9.2/dist/gcds-utility.min.css"
    />

    <!---------- GC Design System Components ---------->
    <!-- TODO: Replace <version-number> with the latest version number to receive corresponding updates of GC Design System Components. All notable changes will be documented in the changelog: https://github.com/cds-snc/gcds-components/blob/main/CHANGELOG.md -->
    <link
      rel="stylesheet"
      href="https://cdn.design-system.alpha.canada.ca/@cdssnc/gcds-components@0.40.0/dist/gcds/gcds.css"
    />
    <script
      type="module"
      src="https://cdn.design-system.alpha.canada.ca/@cdssnc/gcds-components@0.40.0/dist/gcds/gcds.esm.js"
    ></script>

    <!-- Custom styles -->
    <!-- TODO: If needed, uncomment and link your custom CSS file here. -->
    <!-- <link rel="stylesheet" href="path/to/custom.css" /> -->
  </head>

  <body>
    <!---------- Header ---------->
    <!-- TODO: Modify the lang-href to set the language toggle's URL. -->
    <!-- TODO: Update the skip-to-href with the main content container's id. -->
    <gcds-header lang-href="#" skip-to-href="#main-content">
      <!-- The slot="search" attribute adds the search component to the header. -->
      <gcds-search slot="search"></gcds-search>

      <!-- The slot="breadcrumb" attribute adds the breadcrumbs component to the header. -->
      <gcds-breadcrumbs slot="breadcrumb">
        <!-- TODO: Adjust the breadcrumb links with the correct ones for your site. -->
        <gcds-breadcrumbs-item href="#">Link</gcds-breadcrumbs-item>
        <gcds-breadcrumbs-item href="#">Link</gcds-breadcrumbs-item>
      </gcds-breadcrumbs>
    </gcds-header>

    <!---------- Main content ---------->
    <!-- TODO: Confirm the id matches the "skip-to-href" id in the header. -->
    <gcds-container
      id="main-content"
      main-container
      size="xl"
      centered
      tag="main"
    >
      <!-- TODO: Update the heading and text content. -->
      <section>
        <gcds-heading tag="h1">Basic page</gcds-heading>
        <gcds-text>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
          eiusmod tempor incididunt ut labore et dolore magna aliqua. Turp is
          egestas maecenas pharetra convallis posuere morbi leo urna.
        </gcds-text>
      </section>

      <section>
        <gcds-heading tag="h2">Section 1</gcds-heading>
        <gcds-text>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
          eiusmod tempor incididunt ut labore et dolore magna aliqua. Turp is
          egestas maecenas pharetra convallis posuere morbi leo urna.
        </gcds-text>

        <gcds-heading tag="h3">Subsection heading</gcds-heading>
        <gcds-text>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
          eiusmod tempor incididunt ut labore et dolore magna aliqua. Turp is
          egestas maecenas pharetra convallis posuere morbi leo urna.
        </gcds-text>

        <gcds-heading tag="h3">Subsection heading</gcds-heading>
        <gcds-text>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
          eiusmod tempor incididunt ut labore et dolore magna aliqua. Turp is
          egestas maecenas pharetra convallis posuere morbi leo urna.
        </gcds-text>
      </section>

      <section>
        <gcds-heading tag="h2">Section 2</gcds-heading>
        <gcds-text>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
          eiusmod tempor incididunt ut labore et dolore magna aliqua. Turp is
          egestas maecenas pharetra convallis posuere morbi leo urna.
        </gcds-text>
      </section>

      <section>
        <gcds-heading tag="h2">Section 3</gcds-heading>
        <gcds-text>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
          eiusmod tempor incididunt ut labore et dolore magna aliqua. Turp is
          egestas maecenas pharetra convallis posuere morbi leo urna.
        </gcds-text>
      </section>

      <!-- TODO: Update the date to reflect the page's most recent change. -->
      <gcds-date-modified>2024-08-22</gcds-date-modified>
    </gcds-container>

    <!---------- Footer ---------->
    <!-- TODO: Update or remove the contextual footer heading and links as needed. -->
    <gcds-footer
      display="full"
      contextual-heading="Canadian Digital Service"
      contextual-links='{ "Why GC Notify": "#","Features": "#", "Activity on GC Notify": "#"}'
    >
    </gcds-footer>
  
<script>
(function(){
  async function load() {
    const res = await fetch('./report.json', {cache: 'no-store'});
    const data = await res.json();

    // Stats (if present)
    function setText(id, txt){
      var el = document.getElementById(id);
      if (el) el.textContent = txt;
    }
    if (data.meta && data.meta.counts){
      const c = data.meta.counts;
      setText('count-a',  `A: ${(+c.A_rows||0).toLocaleString()}`);
      setText('count-b',  `B: ${(+c.B_rows||0).toLocaleString()}`);
      setText('count-c',  `C: ${(+c.C_rows||0).toLocaleString()}`);
      setText('count-bc', `BC: ${(+c.BC_rows||0).toLocaleString()}`);
      setText('count-m',  `Matches: ${(+c.matches||0).toLocaleString()}`);
    }

    // Ensure a table exists
    var table = document.getElementById('report');
    if (!table) {
      table = document.createElement('table');
      table.id = 'report';
      table.className = 'wb-tables table table-striped table-hover';
      table.setAttribute('data-wb-tables','{"ordering": true, "searching": true, "pageLength": 25}');
      var thead = document.createElement('thead');
      thead.innerHTML = '<tr>' +
        '<th>owner_org</th><th>tracking_number</th><th>request_number</th>' +
        '<th>Informal Requests (sum)</th><th>Unique Identifier(s)</th>' +
        '<th>summary_en</th><th>summary_fr</th></tr>';
      var tbody = document.createElement('tbody');
      table.appendChild(thead); table.appendChild(tbody);
      (document.querySelector('main') || document.body).appendChild(table);
    }
    var tbody = table.querySelector('tbody') || document.createElement('tbody');
    if (!table.querySelector('tbody')) table.appendChild(tbody);

    // Populate rows
    (data.rows || []).forEach(function(r){
      var tr = document.createElement('tr');
      function td(v, cls){ var x=document.createElement('td'); if(cls) x.className=cls; x.textContent = v==null?'':String(v); return x; }
      tr.appendChild(td(r.owner_org));
      tr.appendChild(td(r.tracking_number));
      tr.appendChild(td(r.c_request_number || ''));
      tr.appendChild(td((r.informal_requests_sum||0).toLocaleString()));
      tr.appendChild(td(r.unique_identifiers || ''));
      tr.appendChild(td(r.summary_en || '', 'small'));
      tr.appendChild(td(r.summary_fr || '', 'small'));
      tbody.appendChild(tr);
    });

    // Initialize WET, if present
    if (window.wb && window.wb.shell) { window.wb.shell.init($(document)); }
  }
  load().catch(console.error);
})();
</script>
</body>
</html>

