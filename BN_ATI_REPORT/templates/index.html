<!-- BN_ATI_REPORT/templates/index.html -->
<!-- TODO: Remove all comments before deploying your code to production. -->
<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- TODO: Add a description for SEO/sharing. -->
    <meta name="description" content="BN ATI Report" />

    <title>ATI Requests for Proactively Published Briefing Note Titles and Numbers</title>


    <!-- GC Design System -->
    <link rel="stylesheet" href="https://cdn.design-system.alpha.canada.ca/@cdssnc/gcds-utility@1.9.2/dist/gcds-utility.min.css" />
    <link rel="stylesheet" href="https://cdn.design-system.alpha.canada.ca/@cdssnc/gcds-components@0.40.0/dist/gcds/gcds.css" />
    <script type="module" src="https://cdn.design-system.alpha.canada.ca/@cdssnc/gcds-components@0.40.0/dist/gcds/gcds.esm.js"></script>

    <!-- DataTables core + SearchBuilder (CSS only; JS injected by script) -->
  
    <style>
      td.small{max-width:56ch;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
      .pill{display:inline-block;padding:.15rem .4rem;border-radius:999px;background:#eef;font-size:.85em;margin-right:.25rem}
      .table-wrap{margin-block: 1.5rem;}
      table.dataTable {width:100% !important}
      table.dataTable tr.shown td { background: #f9fbff; }
      .dt-details { padding: .75rem 1rem; line-height: 1.35; }
      .dt-details h4 { margin:.2rem 0 .4rem; font-size:1rem; }
      .dt-details p { margin:.25rem 0; }
      .preset-bar { display:flex; gap:.5rem; flex-wrap:wrap; margin: .5rem 0 1rem; }

       /* Section 2: chart sizing and font bump */
      .chart-wrap {
        width: 71.25rem;       /* ~1140px */
        margin: 0 auto;
        font-size: 1.1rem;     /* larger base font near the chart */
      }
      #weakChart {
        width: 100%;
        height: 700px;         /* allow room for stacked bars */
      }
    
    
    </style>
  </head>

  <body>
    <!---------- Header ---------->
    <gcds-header lang-href="#" skip-to-href="#main-content">
      <gcds-search slot="search"></gcds-search>
      <gcds-breadcrumbs slot="breadcrumb">
        <gcds-breadcrumbs-item href="#">Link</gcds-breadcrumbs-item>
        <gcds-breadcrumbs-item href="#">Link</gcds-breadcrumbs-item>
      </gcds-breadcrumbs>
    </gcds-header>

    <!---------- Main content ---------->
    <gcds-container
      id="main-content"
      main-container
      size="xl"
      centered
      tag="main"
    >
      <section>
        <gcds-heading tag="h1">ATI Requests for Proactively Published Briefing Note Titles and Numbers</gcds-heading>
        <gcds-text>
          In accordance with the Access to Information Act, the government proactively publishes titles and reference numbers of memoranda received by ministers and deputy heads. These are often requested under the ATIA.
        </gcds-text>
      </section>

      <!-- ▶︎ SECTION 1 (DataTables lives here) -->
      <section id="section-1">
        <gcds-heading tag="h2">Combined Data</gcds-heading>
        <!-- Stats populated here -->
        <gcds-text id="bn-ati-stats"></gcds-text>

         <div class="preset-bar">
         
          <gcds-button id="preset-informal" type="button" button-role="secondary">
            Apply: Only Records Informally Requested
          </gcds-button>
          <gcds-button id="preset-clear" type="button">
            Clear Filters
          </gcds-button>
        </div>

        <div class="table-wrap">
          <gcds-heading tag="h3">Index of Records</gcds-heading>
          <table id="report" class="display">
            <thead>
              <tr>
                <th>owner_org</th>
                <th>tracking_number</th>
                <th>request_number</th>
                <th>Informal Requests (sum)</th>
                <th>Unique Identifier(s)</th>
                <th>summary_en</th>
                <th>summary_fr</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>


      <!-- Section 2: Stacked bar chart + details (table inside details) -->
      <section id="section-2" style="text-align:center;">
        <gcds-heading tag="h2">Section 2</gcds-heading>
        <gcds-text>
          Weak BN ID distribution by owner_org (stacked). Expand to view raw counts.
        </gcds-text>

        <div class="chart-wrap">
          <canvas id="weakChart" aria-label="Weak BN ID counts per owner_org"></canvas>
        </div>

        <!-- Expandable data table -->
        <gcds-details details-title="Chart Data" open>
          <div class="table-wrap">
            <table id="weakTable" class="display compact" style="min-width: 720px;">
              <thead>
                <tr>
                  <th>owner_org</th>
                  <th>c</th>
                  <th>1</th>
                  <th>0</th>
                  <th>NA</th>
                  <th>na</th>
                  <th>-</th>
                  <th>REDACTED</th>
                  <th>[REDACTED]</th>
                  <th>TBD-PM-00</th>
                  <th>Total</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </gcds-details>
      </section>


      <section>
        <gcds-heading tag="h2">Section 3</gcds-heading>
        <gcds-text>Additional content.</gcds-text>
      </section>

      <gcds-date-modified>2024-08-22</gcds-date-modified>
    </gcds-container>

    <!---------- Footer ---------->
    <gcds-footer
      display="full"
      contextual-heading="Open Government Portal Reports"
      contextual-links='{ "GitHub": "https://github.com/open-data/analytics-corporate-reporting","Analytics Open Data": "https://open.canada.ca/data/en/dataset/2916fad5-ebcc-4c86-b0f3-4f619b29f412", "Open Government Analytics": "https://open.canada.ca/en/content/open-government-analytics"}'
    >
    </gcds-footer>

    <!--REPORT_SCRIPT-->
  </body>
</html>
